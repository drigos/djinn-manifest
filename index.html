<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Djinns Manifesto — Choose your language</title>
  <meta name="description" content="Select your language to read the Djinns Manifesto.">
  <meta name="color-scheme" content="dark light">

  <link rel="alternate" hreflang="x-default" href="https://djinn.martins.icu/">
  <link rel="alternate" hreflang="pt-br" href="https://djinn.martins.icu/pt-br/">
  <link rel="alternate" hreflang="en"    href="https://djinn.martins.icu/en/">
  <link rel="alternate" hreflang="es"    href="https://djinn.martins.icu/es/">

  <link rel="canonical" href="https://djinn.martins.icu/">

  <meta property="og:title" content="Djinns Manifesto">
  <meta property="og:description" content="A cosmic contract between the dreamer and the granter — with power, grace, and limits.">
  <meta property="og:type" content="website">
  <meta property="og:url" content="https://djinn.martins.icu/">
  <meta property="og:site_name" content="Djinns Manifesto" />
  <meta property="og:locale" content="en_US">
  <meta property="og:locale:alternate" content="pt_BR" />
  <meta property="og:locale:alternate" content="es_ES" />
  <meta property="og:image" content="https://djinn.martins.icu/assets/img/star-night-bg.png" />
  <meta property="og:image:type" content="image/png" />
  <meta property="og:image:width" content="1200" />
  <meta property="og:image:height" content="630" />
  <meta property="og:image:alt" content="Djinns Manifesto" />

  <meta name="twitter:title" content="Djinns Manifesto" />
  <meta name="twitter:description" content="A cosmic contract between the dreamer and the granter — with power, grace, and limits." />
  <meta name="twitter:image" content="https://djinn.martins.icu/assets/img/star-night-bg.png" />
  <meta name="twitter:site" content="@martindrg" />
  <meta name="twitter:creator" content="@martindrg" />

  <meta name="theme-color" content="#7c5cff" />

  <style>
    :root{color-scheme:light dark;}
    body{
      margin:0; font: 16px/1.5 system-ui, -apple-system, Segoe UI, Roboto, Inter, sans-serif;
      background:
        radial-gradient(1200px 600px at 10% -10%, rgba(124,92,255,.18), transparent 60%),
        radial-gradient(1000px 800px at 110% 10%, rgba(63,209,255,.18), transparent 60%),
        linear-gradient(180deg, #0b0b10, #101017 60%, #0b0b10 100%);
      color: #e7e7ec;
      min-height:100dvh; display:grid; place-items:center;
    }
    .panel{
      background: rgba(20,20,33,.9);
      border:1px solid #2a2a3a; border-radius:16px; padding:20px 22px;
      max-width:600px; box-shadow: 0 10px 30px rgba(0,0,0,.35);
    }
    h1{font-size:1.4rem; margin:0 0 10px;}
    p{margin:0 0 12px; color:#b7b7c7;}
    .links{display:flex; gap:10px; flex-wrap:wrap; justify-content:center}
    .links a{
      text-decoration:none; color:#e7e7ec; border:1px solid #2a2a3a;
      border-radius:999px; padding:8px 12px;
    }
    .sr-only{position:absolute; width:1px; height:1px; padding:0; margin:-1px; overflow:hidden; clip:rect(0 0 0 0); white-space:nowrap; border:0;}
  </style>

  <script>
  /* Redirects based on saved preferences or browser language.
     Maintains a neutral root page for SEO (hreflang links + fallback content). */
  (function () {
    var PATHS = { 'pt-br': '/pt-br/', 'en': '/en/', 'es': '/es/' };

    function storedChoice(){
      try { return localStorage.getItem('langPreferred'); } catch(e){ return null; }
    }
    function mapLang(l){
      if (!l) return null;
      l = l.toLowerCase();
      if (l.startsWith('pt')) return 'pt-br';
      if (l.startsWith('es')) return 'es';
      if (l.startsWith('en')) return 'en';
      return null;
    }
    function pickFromNavigator(){
      var langs = (navigator.languages && navigator.languages.length ? navigator.languages : [navigator.language || navigator.userLanguage]).filter(Boolean);
      for (var i=0;i<langs.length;i++){
        var m = mapLang(langs[i]);
        if (m && PATHS[m]) return m;
      }
      return 'en'; // fallback neutro
    }

    // Does not redirect if hash present (user wants to see root) or if pre-rendered
    if (location.hash && location.hash === '#no-redirect') return;

    var chosen = storedChoice() || pickFromNavigator();
    var target = PATHS[chosen] || PATHS['en'];

    // Avoids abruptly redirecting crawlers without JS: there is an HTML fallback with links.
    // For users: immediate redirection without polluting history
    if (target && location.pathname !== target) {
      try { localStorage.setItem('langPreferred', chosen); document.cookie = "langChosen=1; max-age=31536000; path=/"; } catch(e){}
      window.location.replace(target);
    }
  })();
  </script>
</head>
<body>
  <!-- Fallback for bots/no JS: Simple selection page -->
  <div class="panel" role="region" aria-labelledby="title">
    <h1 id="title">Djinns Manifesto — <span class="sr-only">Language selection</span></h1>
    <p>Select your language / Selecione seu idioma / Seleccione su idioma</p>
    <div class="links" aria-label="Languages">
      <a href="/pt-br/" lang="pt-BR">Português</a>
      <a href="/en/"    lang="en">English</a>
      <a href="/es/"    lang="es">Español</a>
    </div>
  </div>
</body>
</html>
